<ng-container *ngIf="refresh$ | async as refresh">

  <mat-progress-spinner
    *ngIf="refresh.isLoading; else notLoading"
    [color]="'primary'"
    [mode]="'indeterminate'"
    [value]="50">
  </mat-progress-spinner>

  <ng-template #notLoading>
    <mat-list role="list" *ngIf="refresh.value; else isError">
      <mat-list-item role="listitem" *ngFor="let item of refresh.value ? refresh.value : undefined | async">
        {{ item }}
      </mat-list-item>
    </mat-list>

    <ng-template #isError>
      <p>Oops something went wrong</p>
    </ng-template>
  </ng-template>

</ng-container>

<button mat-raised-button color="primary" (click)="refreshData()">Try again</button>
